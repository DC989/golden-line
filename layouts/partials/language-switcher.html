<div class="language-switcher">
  {{ range .Site.Languages }} {{ if eq .Lang $.Language.Lang }}
  <span class="active">{{ .LanguageName }}</span>
  {{ else }} {{ if $.IsTranslated }} {{ $targetLang := .Lang }} {{ range
  $.Translations }} {{ if eq .Lang $targetLang }}
  <a href="{{ .Permalink }}">{{ .Language.LanguageName }}</a>
  {{ end }} {{ end }} {{ else }}
  <a href="/{{ .Lang }}/">{{ .LanguageName }}</a>
  {{ end }} {{ end }} {{ end }}
</div>
