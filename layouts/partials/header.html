<header>
  <!-- Top bar for Theme and Language Switcher -->
  <div class="container-fluid d-flex justify-content-end py-1 align-items-center">
    <!-- Language Switcher -->
    {{ partial "language-switcher.html" . }}

    <div class="dropdown ms-3">
      <button class="btn btn-link py-0 px-2 dropdown-toggle d-flex align-items-center"
              id="bd-theme"
              type="button"
              aria-expanded="false"
              data-bs-toggle="dropdown"
              data-bs-display="static"
              aria-label="Toggle theme (auto)">
        <svg class="bi my-1 theme-icon-active" width="1em" height="1em"><use href="#circle-half"></use></svg>
        <span class="visually-hidden ms-2" id="bd-theme-text">Toggle theme</span>
      </button>
      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
        <li>
          <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
            <svg class="bi me-2 opacity-50" width="1em" height="1em"><use href="#sun-fill"></use></svg>
            Light
            <svg class="bi ms-auto d-none" width="1em" height="1em"><use href="#check2"></use></svg>
          </button>
        </li>
        <li>
          <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
            <svg class="bi me-2 opacity-50" width="1em" height="1em"><use href="#moon-stars-fill"></use></svg>
            Dark
            <svg class="bi ms-auto d-none" width="1em" height="1em"><use href="#check2"></use></svg>
          </button>
        </li>
        <li>
          <button type="button" class="dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
            <svg class="bi me-2 opacity-50" width="1em" height="1em"><use href="#circle-half"></use></svg>
            Auto
            <svg class="bi ms-auto d-none" width="1em" height="1em"><use href="#check2"></use></svg>
          </button>
        </li>
      </ul>
    </div>
  </div>

  <nav class="navbar navbar-expand-lg bg-body-tertiary">
    <div class="container-fluid">
      <a class="navbar-brand" href="{{ .Site.Home.RelPermalink }}">Golden Line Transfers</a>

      <button
        class="search-trigger d-none d-lg-flex me-3"
        type="button"
        data-bs-toggle="modal"
        data-bs-target="#searchModal"
        aria-label="Search"
      >
        <i class="bi bi-search"></i>
        <span>{{ i18n "searchPlaceholder" }}</span>
        <kbd>/</kbd>
      </button>

      <button
        class="search-trigger d-lg-none me-2"
        type="button"
        data-bs-toggle="modal"
        data-bs-target="#searchModal"
        aria-label="Search"
      >
        <i class="bi bi-search"></i>
      </button>

      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse justify-content-lg-end" id="navbarNav">
        <ul class="navbar-nav align-items-start align-items-lg-center">
          {{ range .Site.Menus.main }}
            {{ if .HasChildren }}
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle{{ if $.IsMenuCurrent "main" . }} active{{ end }}" href="{{ .URL }}" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  {{ .Name }}
                </a>
                <ul class="dropdown-menu">
                  {{ range .Children }}
                    <li><a class="dropdown-item{{ if $.IsMenuCurrent "main" . }} active{{ end }}" href="{{ .URL }}">{{ .Name }}</a></li>
                  {{ end }}
                </ul>
              </li>
            {{ else }}
              <li class="nav-item">
                <a
                  aria-current="page"
                  href="{{ .URL }}"
                  class="nav-link{{ if $.IsMenuCurrent "main" . }} active{{ end }}"
                >
                  {{ .Name }}
                </a>
              </li>
            {{ end }}
          {{ end }}
        </ul>
      </div>
    </div>
  </nav>
</header>
