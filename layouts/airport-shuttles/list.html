{{ define "main" }}

{{/* ================================================================
   HERO SECTION — Editorial style with large display text
   ================================================================ */}}
<section class="as-hero">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-10 text-center">
        <div class="as-hero__icon mb-4">
          <i class="bi bi-airplane-engines"></i>
        </div>
        <h1 class="display-2 fw-bold text-uppercase mb-3">
          {{ .Title }}
        </h1>
        <p class="lead fs-5 mb-4" style="color: var(--gl-accent)">
          {{ .Description }}
        </p>
        <div class="as-hero__divider mx-auto"></div>
      </div>
    </div>
  </div>
</section>

{{/* ================================================================
   CONTENT + SECTIONS — Different rendering for landing vs child pages
   ================================================================ */}}

<div class="container py-5">
  <div class="row">
    <div class="col-lg-10 mx-auto">

      {{/* Render markdown content if present */}}
      {{ if .Content }}
      <div class="as-content-block mb-5">
        {{ .Content }}
      </div>
      {{ end }}

      {{/* ========================================================
         SECTION LANDING PAGE — Show airport cards + how it works
         ======================================================== */}}
      {{ if or (eq .Type "airport-shuttles") (not .Parent) }}
      {{ if .Sections }}

      {{/* --- Airport Cards --- */}}
      <div class="row g-4 mb-5">
        <div class="col-12">
          <h2 class="h4 text-uppercase fw-bold mb-4 border-bottom pb-2">
            <i class="bi bi-geo-alt-fill me-2 text-primary"></i>{{ i18n "airportSelectAirport" }}
          </h2>
        </div>

        {{ range .Sections.ByTitle }}
        <div class="col-md-6">
          <div class="as-airport-card h-100">
            <div class="as-airport-card__code">
              {{ with .Params.airport_code }}{{ . }}{{ end }}
            </div>
            <div class="as-airport-card__body">
              <h3 class="h5 fw-bold mb-2">{{ .Title }}</h3>
              <p class="small mb-3 opacity-75">{{ .Description }}</p>
              <a href="{{ .Permalink }}" class="btn btn-sm btn-primary text-black fw-bold">
                {{ i18n "viewDetails" }} <i class="bi bi-arrow-right ms-1"></i>
              </a>
            </div>
          </div>
        </div>
        {{ end }}
      </div>

      {{/* --- How It Works Timeline --- */}}
      <div class="as-how-it-works mb-5">
        <h2 class="h4 text-uppercase fw-bold mb-4 border-bottom pb-2">
          <i class="bi bi-signpost-split-fill me-2 text-primary"></i>{{ i18n "airportHowItWorks" }}
        </h2>
        <div class="row g-0">
          <div class="col-md-4">
            <div class="as-step">
              <div class="as-step__number">01</div>
              <div class="as-step__icon"><i class="bi bi-calendar-check"></i></div>
              <h4 class="h6 fw-bold text-uppercase">{{ i18n "airportStep1Title" }}</h4>
              <p class="small opacity-75 mb-0">{{ i18n "airportStep1Desc" }}</p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="as-step">
              <div class="as-step__number">02</div>
              <div class="as-step__icon"><i class="bi bi-broadcast"></i></div>
              <h4 class="h6 fw-bold text-uppercase">{{ i18n "airportStep2Title" }}</h4>
              <p class="small opacity-75 mb-0">{{ i18n "airportStep2Desc" }}</p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="as-step">
              <div class="as-step__number">03</div>
              <div class="as-step__icon"><i class="bi bi-person-check"></i></div>
              <h4 class="h6 fw-bold text-uppercase">{{ i18n "airportStep3Title" }}</h4>
              <p class="small opacity-75 mb-0">{{ i18n "airportStep3Desc" }}</p>
            </div>
          </div>
        </div>
      </div>

      {{/* --- Pricing Callout --- */}}
      <div class="as-pricing-callout mb-5">
        <div class="row align-items-center">
          <div class="col-md-3 text-center mb-3 mb-md-0">
            <div class="as-pricing-callout__price">
              <span class="as-pricing-callout__currency">€</span>1.50
            </div>
            <div class="small text-uppercase fw-bold opacity-75">{{ i18n "airportPerKm" }}</div>
          </div>
          <div class="col-md-9">
            <h3 class="h5 fw-bold text-uppercase mb-2">{{ i18n "airportPricingTitle" }}</h3>
            <p class="mb-0 opacity-75">{{ i18n "airportPricingDesc" }}</p>
          </div>
        </div>
      </div>

      {{ end }}
      {{ end }}

      {{/* ========================================================
         CHILD PAGE (Individual Airport) — Show other airports
         ======================================================== */}}
      {{ if and .Parent (eq .Parent.Type "airport-shuttles") }}

      <div class="mt-5 pt-5 border-top">
        <h4 class="h5 text-muted mb-4 text-uppercase">
          <i class="bi bi-airplane me-2"></i>{{ i18n "airportOtherAirports" }}
        </h4>
        <div class="d-flex flex-wrap gap-2">
          {{ range .Parent.Sections }}
          {{ if ne .Permalink $.Permalink }}
          <a href="{{ .Permalink }}" class="btn btn-sm btn-outline-primary rounded-pill px-3">
            {{ with .Params.airport_code }}{{ . }} — {{ end }}{{ .Title }}
          </a>
          {{ end }}
          {{ end }}
        </div>
      </div>

      {{ end }}

    </div>
  </div>
</div>

{{ end }}
